// LiFi Receiver Arduino Code

int sensorPin = A0;  // Photodiode sensor connected to analog pin A0

void setup() {
  Serial.begin(9600);  // Initialize serial communication
}

void loop() {
  int sensorValue = analogRead(sensorPin);  // Read the sensor value
  static bool isReceiving = false;
  static String receivedData = "";

  if (sensorValue > 500) {  // Adjust the threshold value as per your environment
    isReceiving = true;
  }

  if (isReceiving) {
    char receivedChar = Serial.read();
    if (receivedChar != -1) {
      if (receivedChar == '\n') {
        isReceiving = false;
        Serial.println("Received Data: " + receivedData);
        receivedData = "";
      } else {
        receivedData += receivedChar;
      }
    }
  }

  delay(10);
}
